(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9888],{9449:function(e,t,r){Promise.resolve().then(r.bind(r,5693))},5693:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(7437),n=r(2265),s=r(6463),l=r(5216),o=r(495),i=r(6013),d=r(7412),c=r(6127),u=r(3304),f=r(4697),m=r(7440);let x=u.fC,h=u.xz,p=u.h_;u.x8;let g=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(u.aV,{ref:t,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});g.displayName=u.aV.displayName;let v=n.forwardRef((e,t)=>{let{className:r,children:n,...s}=e;return(0,a.jsxs)(p,{children:[(0,a.jsx)(g,{}),(0,a.jsxs)(u.VY,{ref:t,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s,children:[(0,a.jsx)(u.Dx,{className:"sr-only",children:"Dialog"}),n,(0,a.jsxs)(u.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});v.displayName=u.VY.displayName;let y=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};y.displayName="DialogHeader";let b=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,m.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};b.displayName="DialogFooter";let j=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(u.Dx,{ref:t,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});j.displayName=u.Dx.displayName;let N=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(u.dk,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",r),...n})});N.displayName=u.dk.displayName;var w=r(7776);function k(){let[e,t]=(0,n.useState)(!1),r=(0,s.useRouter)(),{user:u,logout:f}=(0,l.a)();if(!u)return r.push("/login"),null;let m=async()=>{try{if(t(!0),!(await fetch("/api/account/delete",{method:"DELETE"})).ok)throw Error("Failed to delete account");w.Am.success("Account deleted successfully"),f(),r.push("/")}catch(e){console.error("Error deleting account:",e),w.Am.error("Failed to delete account")}finally{t(!1)}};return(0,a.jsx)("div",{className:"container max-w-2xl mx-auto px-4 py-8",children:(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{className:"text-2xl text-destructive",children:"Delete Account"}),(0,a.jsx)(i.SZ,{children:"Permanently delete your account and all associated data"})]}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)(d.bZ,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(d.X,{children:"This action cannot be undone. All your data will be permanently deleted."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"The following data will be deleted:"}),(0,a.jsxs)("ul",{className:"list-disc pl-6 space-y-2",children:[(0,a.jsx)("li",{children:"Your profile information"}),(0,a.jsx)("li",{children:"Posted jobs and proposals"}),(0,a.jsx)("li",{children:"Messages and communications"}),(0,a.jsx)("li",{children:"Payment and transaction history"}),(0,a.jsx)("li",{children:"Reviews and ratings"})]})]})]}),(0,a.jsxs)(i.eW,{className:"flex justify-between",children:[(0,a.jsx)(o.z,{variant:"outline",onClick:()=>r.back(),children:"Cancel"}),(0,a.jsxs)(x,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(o.z,{variant:"destructive",children:"Delete Account"})}),(0,a.jsxs)(v,{children:[(0,a.jsxs)(y,{children:[(0,a.jsx)(j,{children:"Are you absolutely sure?"}),(0,a.jsx)(N,{children:"This action cannot be undone. Your account and all associated data will be permanently deleted."})]}),(0,a.jsx)(b,{children:(0,a.jsx)(o.z,{variant:"destructive",onClick:m,disabled:e,children:e?"Deleting...":"Yes, delete my account"})})]})]})]})]})})}},7412:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return i}});var a=r(7437),n=r(2265),s=r(2218),l=r(7440);let o=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-yellow-500/50 bg-yellow-500/10 text-yellow-500 [&>svg]:text-yellow-500"}},defaultVariants:{variant:"default"}}),i=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(o({variant:n}),r),...s})});i.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})}).displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...n})});d.displayName="AlertDescription"},495:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),n=r(2265),s=r(1538),l=r(2218),o=r(7440);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:n,size:l,className:r})),ref:t,...c})});d.displayName="Button"},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var a=r(7437),n=r(2265),s=r(7440);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});l.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},5216:function(e,t,r){"use strict";r.d(t,{a:function(){return d}});var a=r(9099),n=r(9291),s=r(6853),l=r(2649);let o=()=>!1,i=(0,a.Ue)()((0,n.tJ)(e=>({user:null,isAuthenticated:!1,login:t=>{let r=o()?["homeowner","contractor"]:t.roles,a=t.activeRole||r[0];t.token&&l.Z.set("auth-token",t.token,{expires:7,sameSite:"strict",secure:!0,path:"/"}),e({user:{...t,roles:r,activeRole:a},isAuthenticated:!0})},logout:()=>{l.Z.remove("auth-token",{path:"/"}),localStorage.removeItem("auth-storage"),sessionStorage.clear(),e({user:null,isAuthenticated:!1})},switchRole:t=>{e(e=>e.user&&e.user.roles.includes(t)?{...e,user:{...e.user,activeRole:t}}:e)},clearState:()=>{e({user:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),d=()=>{let{user:e,error:t,isLoading:r}=(0,s.aF)(),{user:a,isAuthenticated:n,login:d,logout:c,switchRole:u}=i();return{user:o()?a:e?{id:e.sub,name:e.name,email:e.email,roles:e["https://myapp.org/roles"]||["homeowner"],activeRole:e["https://myapp.org/activeRole"]||"homeowner"}:null,isAuthenticated:o()?n:!!e,isLoading:!o()&&r,error:o()?null:t,login:d,logout:c,switchRole:u,checkAuth:()=>{if(o()){let e=l.Z.get("auth-token"),t=n&&null!==a&&null!==e;return t||i.getState().clearState(),t}return t?(console.error("Auth0 error:",t),!1):!r&&null!==e}}}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(4839),n=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[2183,4314,6853,7776,4086,3328,5844,2971,7023,1744],function(){return e(e.s=9449)}),_N_E=e.O()}]);