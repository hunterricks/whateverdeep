(()=>{var e={};e.id=4966,e.ids=[4966],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25261:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>l}),r(79791),r(11506),r(26083),r(19644),r(96560);var s=r(23191),a=r(88716),n=r(48001),o=r(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let l=["",{children:["signup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79791)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/signup/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,15778)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,26083)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,19644)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/not-found.tsx"]}],c=["/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/signup/page.tsx"],d="/signup/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/signup/page",pathname:"/signup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},49879:(e,t,r)=>{Promise.resolve().then(r.bind(r,58903))},58903:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var s=r(10326),a=r(17577),n=r(74723),o=r(74064),i=r(27256),l=r(90772),c=r(55632),d=r(54432),u=r(48051),m=r(93095),p=r(82561),h=r(52067),f=r(53405),x=r(2566),g=r(9815),b=r(45226),v="Checkbox",[j,y]=(0,m.b)(v),[w,k]=j(v),N=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:o,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:m,form:f,...x}=e,[g,v]=a.useState(null),j=(0,u.e)(t,e=>v(e)),y=a.useRef(!1),k=!g||f||!!g.closest("form"),[N=!1,P]=(0,h.T)({prop:o,defaultProp:i,onChange:m}),R=a.useRef(N);return a.useEffect(()=>{let e=g?.form;if(e){let t=()=>P(R.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[g,P]),(0,s.jsxs)(w,{scope:r,state:N,disabled:c,children:[(0,s.jsx)(b.WV.button,{type:"button",role:"checkbox","aria-checked":A(N)?"mixed":N,"aria-required":l,"data-state":I(N),"data-disabled":c?"":void 0,disabled:c,value:d,...x,ref:j,onKeyDown:(0,p.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,p.M)(e.onClick,e=>{P(e=>!!A(e)||!e),k&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),k&&(0,s.jsx)(C,{control:g,bubbles:!y.current,name:n,value:d,checked:N,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!A(i)&&i})]})});N.displayName=v;var P="CheckboxIndicator",R=a.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...n}=e,o=k(P,r);return(0,s.jsx)(g.z,{present:a||A(o.state)||!0===o.state,children:(0,s.jsx)(b.WV.span,{"data-state":I(o.state),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});R.displayName=P;var C=e=>{let{control:t,checked:r,bubbles:n=!0,defaultChecked:o,...i}=e,l=a.useRef(null),c=(0,f.D)(r),d=(0,x.t)(t);a.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==r&&t){let s=new Event("click",{bubbles:n});e.indeterminate=A(r),t.call(e,!A(r)&&r),e.dispatchEvent(s)}},[c,r,n]);let u=a.useRef(!A(r)&&r);return(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??u.current,...i,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function A(e){return"indeterminate"===e}function I(e){return A(e)?"indeterminate":e?"checked":"unchecked"}var z=r(32933),S=r(77863);let _=a.forwardRef(({className:e,...t},r)=>s.jsx(N,{ref:r,className:(0,S.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(R,{className:(0,S.cn)("flex items-center justify-center text-current"),children:s.jsx(z.Z,{className:"h-4 w-4"})})}));_.displayName=N.displayName;var E=r(35047),D=r(85999),F=r(90434),G=r(2991);let M=i.Ry({name:i.Z_().min(2,{message:"Name must be at least 2 characters."}),email:i.Z_().email({message:"Please enter a valid email address."}),password:i.Z_().min(8,{message:"Password must be at least 8 characters."}),roles:i.IX(i.Km(["homeowner","contractor"])).min(1,{message:"Please select at least one role."})});function V(){let[e,t]=(0,a.useState)(!1),r=(0,E.useRouter)(),{login:i}=(0,G.a)(),u=(0,n.cI)({resolver:(0,o.F)(M),defaultValues:{name:"",email:"",password:"",roles:[]}});async function m(e){t(!0);try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to sign up")}D.Am.success("Sign up successful! Please log in."),r.push("/login")}catch(e){D.Am.error(e.message||"Error signing up. Please try again.")}finally{t(!1)}}return s.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Create an Account"}),s.jsx(c.l0,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(m),className:"space-y-8",children:[s.jsx(c.Wi,{control:u.control,name:"name",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Full Name"}),s.jsx(c.NI,{children:s.jsx(d.I,{placeholder:"John Doe",...e})}),s.jsx(c.zG,{})]})}),s.jsx(c.Wi,{control:u.control,name:"email",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Email"}),s.jsx(c.NI,{children:s.jsx(d.I,{type:"email",placeholder:"john@example.com",...e})}),s.jsx(c.zG,{})]})}),s.jsx(c.Wi,{control:u.control,name:"password",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Password"}),s.jsx(c.NI,{children:s.jsx(d.I,{type:"password",placeholder:"********",...e})}),s.jsx(c.zG,{})]})}),s.jsx(c.Wi,{control:u.control,name:"roles",render:()=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"I want to..."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(_,{id:"homeowner",onCheckedChange:e=>{let t=u.getValues().roles;e?u.setValue("roles",[...t,"homeowner"]):u.setValue("roles",t.filter(e=>"homeowner"!==e))}}),s.jsx("label",{htmlFor:"homeowner",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Hire for projects (Homeowner)"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(_,{id:"contractor",onCheckedChange:e=>{let t=u.getValues().roles;e?u.setValue("roles",[...t,"contractor"]):u.setValue("roles",t.filter(e=>"contractor"!==e))}}),s.jsx("label",{htmlFor:"contractor",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Work on projects (Contractor)"})]})]}),s.jsx(c.zG,{})]})}),s.jsx(l.z,{type:"submit",disabled:e,className:"w-full",children:e?"Creating Account...":"Create Account"})]})}),(0,s.jsxs)("p",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Already have an account?"," ",s.jsx(F.default,{href:"/login",className:"text-primary hover:underline",children:"Log in"})]})]})})}},55632:(e,t,r)=>{"use strict";r.d(t,{NI:()=>x,Wi:()=>u,l0:()=>c,lX:()=>f,pf:()=>g,xJ:()=>h,zG:()=>b});var s=r(10326),a=r(17577),n=r(34214),o=r(74723),i=r(77863),l=r(31048);let c=o.RV,d=a.createContext({}),u=({...e})=>s.jsx(d.Provider,{value:{name:e.name},children:s.jsx(o.Qr,{...e})}),m=()=>{let e=a.useContext(d),t=a.useContext(p),{getFieldState:r,formState:s}=(0,o.Gc)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},p=a.createContext({}),h=a.forwardRef(({className:e,...t},r)=>{let n=a.useId();return s.jsx(p.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:(0,i.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let f=a.forwardRef(({className:e,...t},r)=>{let{error:a,formItemId:n}=m();return s.jsx(l._,{ref:r,className:(0,i.cn)(a&&"text-destructive",e),htmlFor:n,...t})});f.displayName="FormLabel";let x=a.forwardRef(({...e},t)=>{let{error:r,formItemId:a,formDescriptionId:o,formMessageId:i}=m();return s.jsx(n.g7,{ref:t,id:a,"aria-describedby":r?`${o} ${i}`:`${o}`,"aria-invalid":!!r,...e})});x.displayName="FormControl";let g=a.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:a}=m();return s.jsx("p",{ref:r,id:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})});g.displayName="FormDescription";let b=a.forwardRef(({className:e,children:t,...r},a)=>{let{error:n,formMessageId:o}=m(),l=n?String(n?.message):t;return l?s.jsx("p",{ref:a,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",e),...r,children:l}):null});b.displayName="FormMessage"},54432:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var s=r(10326),a=r(17577),n=r(77863);let o=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));o.displayName="Input"},31048:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(10326),a=r(17577),n=r(34478),o=r(28671),i=r(77863);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(n.f,{ref:r,className:(0,i.cn)(l(),e),...t}));c.displayName=n.f.displayName},2991:(e,t,r)=>{"use strict";r.d(t,{a:()=>c});var s=r(60114),a=r(85251),n=r(18206),o=r(66562);let i=()=>!1,l=(0,s.Ue)()((0,a.tJ)(e=>({user:null,isAuthenticated:!1,login:t=>{let r=i()?["homeowner","contractor"]:t.roles,s=t.activeRole||r[0];t.token&&o.Z.set("auth-token",t.token,{expires:7,sameSite:"strict",secure:!0,path:"/"}),e({user:{...t,roles:r,activeRole:s},isAuthenticated:!0})},logout:()=>{o.Z.remove("auth-token",{path:"/"}),localStorage.removeItem("auth-storage"),sessionStorage.clear(),e({user:null,isAuthenticated:!1})},switchRole:t=>{e(e=>e.user&&e.user.roles.includes(t)?{...e,user:{...e.user,activeRole:t}}:e)},clearState:()=>{e({user:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),c=()=>{let{user:e,error:t,isLoading:r}=(0,n.aF)(),{user:s,isAuthenticated:a,login:c,logout:d,switchRole:u}=l();return{user:i()?s:e?{id:e.sub,name:e.name,email:e.email,roles:e["https://myapp.org/roles"]||["homeowner"],activeRole:e["https://myapp.org/activeRole"]||"homeowner"}:null,isAuthenticated:i()?a:!!e,isLoading:!i()&&r,error:i()?null:t,login:c,logout:d,switchRole:u,checkAuth:()=>{if(i()){let e=o.Z.get("auth-token"),t=a&&null!==s&&null!==e;return t||l.getState().clearState(),t}return t?(console.error("Auth0 error:",t),!1):!r&&null!==e}}}},32933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},90434:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(79404),a=r.n(s)},79791:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/signup/page.tsx#default`)},53405:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var s=r(17577);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},2566:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var s=r(17577),a=r(65819);function n(e){let[t,r]=s.useState(void 0);return(0,a.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,8775,1438,5999,6908,2574],()=>r(25261));module.exports=s})();