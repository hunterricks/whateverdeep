(()=>{var e={};e.id=9050,e.ids=[9050],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},97420:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>n}),t(57911),t(11506),t(26083),t(19644),t(96560);var s=t(23191),a=t(88716),o=t(48001),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let n=["",{children:["jobs",{children:["[id]",{children:["submit-proposal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,57911)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/jobs/[id]/submit-proposal/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11506)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/layout.tsx"],template:[()=>Promise.resolve().then(t.bind(t,15778)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/template.tsx"],error:[()=>Promise.resolve().then(t.bind(t,26083)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,19644)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/not-found.tsx"]}],d=["/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/jobs/[id]/submit-proposal/page.tsx"],c="/jobs/[id]/submit-proposal/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/jobs/[id]/submit-proposal/page",pathname:"/jobs/[id]/submit-proposal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},40109:(e,r,t)=>{Promise.resolve().then(t.bind(t,80735))},80735:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(10326),a=t(17577),o=t(74723),i=t(74064),l=t(27256),n=t(35047),d=t(90772),c=t(55632),u=t(54432),p=t(87673),m=t(33071),f=t(85999),x=t(2991);let h=l.Ry({coverLetter:l.Z_().min(50,{message:"Cover letter must be at least 50 characters."}),price:l.oQ.number().min(1,{message:"Please enter a valid price."}),estimatedDuration:l.Z_().min(1,{message:"Please specify an estimated duration."})});function b(){let[e,r]=(0,a.useState)(!1),t=(0,n.useRouter)(),{id:l}=(0,n.useParams)(),{user:b,checkAuth:g}=(0,x.a)(),j=(0,o.cI)({resolver:(0,i.F)(h),defaultValues:{coverLetter:"",price:0,estimatedDuration:""}});async function v(e){if(!g()||b?.activeRole!=="contractor"){f.Am.error("You must be logged in as a contractor to submit proposals");return}r(!0);try{if(!(await fetch("/api/proposals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,jobId:l,serviceProvider:b.id})})).ok)throw Error("Failed to submit proposal");f.Am.success("Proposal submitted successfully!"),t.push(`/jobs/${l}`)}catch(e){f.Am.error("Error submitting proposal. Please try again.")}finally{r(!1)}}return g()&&b?.activeRole==="contractor"?s.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(m.Zb,{children:[s.jsx(m.Ol,{children:s.jsx(m.ll,{children:"Submit a Proposal"})}),s.jsx(m.aY,{children:s.jsx(c.l0,{...j,children:(0,s.jsxs)("form",{onSubmit:j.handleSubmit(v),className:"space-y-8",children:[s.jsx(c.Wi,{control:j.control,name:"coverLetter",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Cover Letter"}),s.jsx(c.NI,{children:s.jsx(p.g,{placeholder:"Explain why you're the best fit for this job...",className:"min-h-[200px]",...e})}),s.jsx(c.pf,{children:"Describe your experience and approach to this project"}),s.jsx(c.zG,{})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx(c.Wi,{control:j.control,name:"price",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Price ($)"}),s.jsx(c.NI,{children:s.jsx(u.I,{type:"number",min:"0",step:"100",...e})}),s.jsx(c.pf,{children:"Your proposed price for this project"}),s.jsx(c.zG,{})]})}),s.jsx(c.Wi,{control:j.control,name:"estimatedDuration",render:({field:e})=>(0,s.jsxs)(c.xJ,{children:[s.jsx(c.lX,{children:"Estimated Duration"}),s.jsx(c.NI,{children:s.jsx(u.I,{placeholder:"e.g., 2-3 weeks",...e})}),s.jsx(c.pf,{children:"How long you expect the project to take"}),s.jsx(c.zG,{})]})})]}),s.jsx(d.z,{type:"submit",disabled:e,className:"w-full",children:e?"Submitting...":"Submit Proposal"})]})})})]})}):null}},33071:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>u,ll:()=>n});var s=t(10326),a=t(17577),o=t(77863);let i=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let n=a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},55632:(e,r,t)=>{"use strict";t.d(r,{NI:()=>h,Wi:()=>u,l0:()=>d,lX:()=>x,pf:()=>b,xJ:()=>f,zG:()=>g});var s=t(10326),a=t(17577),o=t(34214),i=t(74723),l=t(77863),n=t(31048);let d=i.RV,c=a.createContext({}),u=({...e})=>s.jsx(c.Provider,{value:{name:e.name},children:s.jsx(i.Qr,{...e})}),p=()=>{let e=a.useContext(c),r=a.useContext(m),{getFieldState:t,formState:s}=(0,i.Gc)(),o=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=r;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...o}},m=a.createContext({}),f=a.forwardRef(({className:e,...r},t)=>{let o=a.useId();return s.jsx(m.Provider,{value:{id:o},children:s.jsx("div",{ref:t,className:(0,l.cn)("space-y-2",e),...r})})});f.displayName="FormItem";let x=a.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:o}=p();return s.jsx(n._,{ref:t,className:(0,l.cn)(a&&"text-destructive",e),htmlFor:o,...r})});x.displayName="FormLabel";let h=a.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:i,formMessageId:l}=p();return s.jsx(o.g7,{ref:r,id:a,"aria-describedby":t?`${i} ${l}`:`${i}`,"aria-invalid":!!t,...e})});h.displayName="FormControl";let b=a.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=p();return s.jsx("p",{ref:t,id:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...r})});b.displayName="FormDescription";let g=a.forwardRef(({className:e,children:r,...t},a)=>{let{error:o,formMessageId:i}=p(),n=o?String(o?.message):r;return n?s.jsx("p",{ref:a,id:i,className:(0,l.cn)("text-sm font-medium text-destructive",e),...t,children:n}):null});g.displayName="FormMessage"},54432:(e,r,t)=>{"use strict";t.d(r,{I:()=>i});var s=t(10326),a=t(17577),o=t(77863);let i=a.forwardRef(({className:e,type:r,...t},a)=>s.jsx("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},31048:(e,r,t)=>{"use strict";t.d(r,{_:()=>d});var s=t(10326),a=t(17577),o=t(34478),i=t(28671),l=t(77863);let n=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...r},t)=>s.jsx(o.f,{ref:t,className:(0,l.cn)(n(),e),...r}));d.displayName=o.f.displayName},87673:(e,r,t)=>{"use strict";t.d(r,{g:()=>i});var s=t(10326),a=t(17577),o=t(77863);let i=a.forwardRef(({className:e,...r},t)=>s.jsx("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...r}));i.displayName="Textarea"},2991:(e,r,t)=>{"use strict";t.d(r,{a:()=>d});var s=t(60114),a=t(85251),o=t(18206),i=t(66562);let l=()=>!1,n=(0,s.Ue)()((0,a.tJ)(e=>({user:null,isAuthenticated:!1,login:r=>{let t=l()?["homeowner","contractor"]:r.roles,s=r.activeRole||t[0];r.token&&i.Z.set("auth-token",r.token,{expires:7,sameSite:"strict",secure:!0,path:"/"}),e({user:{...r,roles:t,activeRole:s},isAuthenticated:!0})},logout:()=>{i.Z.remove("auth-token",{path:"/"}),localStorage.removeItem("auth-storage"),sessionStorage.clear(),e({user:null,isAuthenticated:!1})},switchRole:r=>{e(e=>e.user&&e.user.roles.includes(r)?{...e,user:{...e.user,activeRole:r}}:e)},clearState:()=>{e({user:null,isAuthenticated:!1})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),d=()=>{let{user:e,error:r,isLoading:t}=(0,o.aF)(),{user:s,isAuthenticated:a,login:d,logout:c,switchRole:u}=n();return{user:l()?s:e?{id:e.sub,name:e.name,email:e.email,roles:e["https://myapp.org/roles"]||["homeowner"],activeRole:e["https://myapp.org/activeRole"]||"homeowner"}:null,isAuthenticated:l()?a:!!e,isLoading:!l()&&t,error:l()?null:r,login:d,logout:c,switchRole:u,checkAuth:()=>{if(l()){let e=i.Z.get("auth-token"),r=a&&null!==s&&null!==e;return r||n.getState().clearState(),r}return r?(console.error("Auth0 error:",r),!1):!t&&null!==e}}}},57911:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`/Users/hunterricks/Downloads/stackblitz-starters-3acn8s (7)/app/jobs/[id]/submit-proposal/page.tsx#default`)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,8775,1438,5999,6908,2574],()=>t(97420));module.exports=s})();